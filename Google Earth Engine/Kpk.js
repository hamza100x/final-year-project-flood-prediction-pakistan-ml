var KPK = 
    /* color: #9999ff */
    /* locked: true */
    ee.Geometry.Polygon(
        [[[69.32021622567157, 31.927944007048364],
          [69.57279347205203, 31.945749865571322],
          [69.77338054137972, 32.071869313605006],
          [69.83929306296905, 32.052085657044586],
          [69.81598137979341, 32.025268469872984],
          [69.85651174533949, 31.941984125599387],
          [69.9024586544797, 31.8633460923047],
          [69.90447434599079, 31.706334833768604],
          [69.90664629105379, 31.45075578047101],
          [70.02469517720075, 31.351215590267255],
          [70.21691588592118, 31.462453798950257],
          [70.23751342355662, 31.38277151140229],
          [70.25533133608207, 31.270444751131496],
          [70.21341899850484, 31.135562985770413],
          [70.2089349250074, 31.095116572678737],
          [70.23689664849829, 31.067825504776916],
          [70.25693231577394, 31.08451251729416],
          [70.24401461418024, 31.14588235796302],
          [70.26487791768098, 31.16046393185642],
          [70.33346315251525, 31.178256930715985],
          [70.39109291010863, 31.205417654116665],
          [70.41989526899361, 31.2726399349154],
          [70.5281955312534, 31.324236046723296],
          [70.58293231214118, 31.317137648088316],
          [70.67456236862914, 31.296602701153333],
          [70.71126114642766, 31.3112337038004],
          [70.74042689310096, 31.27249404567063],
          [70.7915696105599, 31.32526593389532],
          [70.83174211240905, 31.370973288023453],
          [70.81150179551318, 31.393229574151047],
          [70.85619595119255, 31.416632765430393],
          [70.87424224817183, 31.434782503930773],
          [70.85933311214505, 31.4716776285799],
          [70.88445389055089, 31.500953106059846],
          [70.85714243481682, 31.536052475795877],
          [70.81883648239611, 31.526663821762003],
          [70.91037268096987, 31.723287989281694],
          [71.05043706022798, 31.900657349570857],
          [71.08751288027166, 32.0090112119836],
          [71.10256754441198, 32.145191596523794],
          [71.17943282194949, 32.171920263187545],
          [71.16706536959923, 32.23117808125835],
          [71.24542822600473, 32.344906003613104],
          [71.33473617054345, 32.37664829097256],
          [71.34372259498438, 32.50380066276082],
          [71.234222238414, 32.492086338797364],
          [71.22355047880058, 32.56371657017038],
          [71.12735613987347, 32.63661486118986],
          [71.09437849377042, 32.86083509321134],
          [71.23718863007727, 33.012960397364644],
          [71.37173426354681, 32.96929296630182],
          [71.45126916836132, 33.01760308774627],
          [71.36887492673384, 33.17863763546904],
          [71.4239400777703, 33.2521410093232],
          [71.5750780667074, 33.20855766422694],
          [71.69301311434775, 33.091283867493274],
          [71.73424678374106, 33.167060636713195],
          [71.68758924303096, 33.34396007106154],
          [71.86317744842745, 33.3921294954555],
          [71.96222321414572, 33.568507336091976],
          [72.06364847979498, 33.7719973975595],
          [72.07398267977806, 33.78313484955342],
          [72.1557375237366, 33.78968950675463],
          [72.25333861160112, 33.789046949145735],
          [72.25332143378272, 33.877981198432785],
          [72.24234875297297, 33.965756274260166],
          [72.4008787014602, 33.99431694140418],
          [72.47986614107919, 34.04325679812907],
          [72.53620626727192, 34.007314634960885],
          [72.66084613306792, 33.953932781203314],
          [72.63431341734973, 33.90736886843196],
          [72.70252030206377, 33.88245531924056],
          [72.78676862452733, 33.95681399444464],
          [72.9618895818308, 34.056819577878606],
          [73.225543415862, 34.15687514170421],
          [73.406798670517, 34.37476409376312],
          [73.44991111219684, 34.570010092973135],
          [73.53682727916939, 34.57257906045909],
          [73.55646778770803, 34.59434700594125],
          [73.60688049537232, 34.585031289838156],
          [73.64081213858671, 34.56325803490999],
          [73.68849968885922, 34.645479818356456],
          [73.65810590362165, 34.66341617553642],
          [73.66890660764163, 34.68135174912897],
          [73.73278367956003, 34.776714344690916],
          [73.8187408335583, 34.799823583098664],
          [73.92026193613746, 34.819040425642456],
          [74.0218748573048, 34.874246222620265],
          [74.06590351905118, 34.930516286822645],
          [74.06870713991152, 35.05421446877183],
          [74.10994803099791, 35.12838796397466],
          [73.97253171763131, 35.17781834936238],
          [73.51114528939245, 35.51830208626701],
          [73.09370086012932, 35.89295334077854],
          [72.65428920927798, 35.875150784242564],
          [72.54443463535058, 36.17721699931172],
          [72.84104094232698, 36.36320307959534],
          [73.03024938348264, 36.53550510804556],
          [73.09830796404653, 36.602208515084406],
          [73.07446253740552, 36.682120551190735],
          [73.91210139729704, 36.71184954154212],
          [73.70886772946115, 36.90095475864302],
          [73.2255166291044, 36.883380755698695],
          [72.63231312591917, 36.83064002129144],
          [72.22209739179091, 36.72122759570616],
          [72.1147334188599, 36.624552646678715],
          [71.81298049344998, 36.489769871860716],
          [71.81068020114914, 36.41328359465877],
          [71.6546292925784, 36.47370722161812],
          [71.43715712338859, 36.233672811860096],
          [71.20148136390061, 36.0418824826969],
          [71.35984472283974, 35.955200190154095],
          [71.49032147512, 35.810532303689186],
          [71.55334132404077, 35.69795044769779],
          [71.50513748897876, 35.6148569931889],
          [71.61343295113174, 35.57862584062513],
          [71.60373609633962, 35.50071034873412],
          [71.64619798657391, 35.43845421345494],
          [71.60079551828743, 35.367266614725764],
          [71.57742884528649, 35.28711069507332],
          [71.6681107075399, 35.20988494781152],
          [71.54585859353851, 35.09946761310706],
          [71.53979142699772, 35.02624764660055],
          [71.46787896233118, 34.94401820121672],
          [71.38333713402062, 34.92081207117607],
          [71.29886168273181, 34.87952970993649],
          [71.28175972129844, 34.80891046968508],
          [71.21528184774, 34.75406231060118],
          [71.08710535110029, 34.69239799374362],
          [71.08896454269133, 34.659296122604864],
          [71.1072948227165, 34.63183023621616],
          [71.0775922508817, 34.58543536167238],
          [71.01771447386794, 34.56163515678767],
          [71.00511940679667, 34.50272792718405],
          [71.03265905511151, 34.4474933071469],
          [71.10136204369087, 34.43979813406251],
          [71.11784115874228, 34.379980592798546],
          [71.18097567191099, 34.36094817348953],
          [71.09437806212043, 34.12959333753994],
          [70.96918621435165, 34.01999684886043],
          [70.80925744922126, 33.971919352899185],
          [70.63847645111501, 33.95095231898893],
          [70.30993298975112, 33.97495321119349],
          [69.89834580448948, 34.04430007205251],
          [69.89352406802865, 33.98965076676236],
          [69.8571527303613, 33.93386615271007],
          [69.92457897676738, 33.86263928148286],
          [69.99873499282471, 33.74341971066936],
          [70.13041165363215, 33.71940425591996],
          [70.14905385011748, 33.65703539180419],
          [70.2006252865208, 33.64494611074671],
          [70.16701733064926, 33.529908859716244],
          [70.23226422897086, 33.47091810166324],
          [70.32280239798978, 33.405156553616884],
          [70.30343048962143, 33.36231219431382],
          [70.32110144179138, 33.32332131070608],
          [70.28690118464972, 33.32620683512967],
          [70.25682908185898, 33.288924515733264],
          [70.16243234962795, 33.229222758368785],
          [70.14547771010407, 33.2073982166303],
          [70.09443822078624, 33.195332185196186],
          [70.0598752230002, 33.21082732041822],
          [70.01780973958412, 33.14183189138546],
          [69.93442521768625, 33.12013229104738],
          [69.86207678892409, 33.084582856363795],
          [69.81075905626048, 33.096266554940556],
          [69.78774012472904, 33.121904296926544],
          [69.71669142853354, 33.080728389510895],
          [69.57152785468526, 33.09237837595057],
          [69.48776194001837, 33.00770062180139],
          [69.49738771180044, 32.88528833543134],
          [69.53170472944184, 32.866604584739406],
          [69.45958361482961, 32.84350693933744],
          [69.38480177828936, 32.762673022165366],
          [69.44656683089067, 32.662221811151795],
          [69.20488681944845, 32.49559922760335],
          [69.2927674568358, 31.99387592459844]]]);
          Map.centerObject(KPK, 6);

          //Time
          var start = ee.Date('2011-01-01');
          var dateRange = ee.DateRange(start, start.advance(11, 'year'));
          
          //TEMP
          var modis = ee.ImageCollection('MODIS/006/MOD11A1');
          var mod11a2 = modis.filterDate(dateRange);
          var modLSTday = mod11a2.select('LST_Day_1km');
          var modLSTc = modLSTday.map(function(img) {
            return img
              .multiply(0.02)
              .subtract(273.15)
              .copyProperties(img, ['system:time_start']);
          });
          var clippedLSTc = modLSTc.mean().clip(KPK);
          //VEG
          var Veg = ee.ImageCollection('MODIS/006/MOD13A2').filterDate(dateRange);
          var ndvi = Veg.select('NDVI');
          var ndvi1= ndvi.mean().clip(KPK);
          //Precipation
          var dataset =  ee.ImageCollection('UCSB-CHG/CHIRPS/DAILY');
          var pre1 = dataset.filterDate(dateRange);
          var pre2 = pre1.select('precipitation');
          
          var pref1 = pre2.mean().clip(KPK);
          var title1 = {
            title: ' Precipitation of KPK',
            hAxis: {title: 'Time'},
            vAxis: {title: 'Precipitation (mm)'},
          };
          
          
          
          //Ice
          var dataset = ee.ImageCollection('MODIS/MOD09GA_006_NDSI');
          
          var ice1 = dataset.filterDate(dateRange);
          
          var ice2 = ice1.select('NDSI');
          
          var icef1 = ice2.mean().clip(KPK);
          
          
          var title = {
            title: ' NDSI of KPK',
            hAxis: {title: 'Time'},
            vAxis: {title: 'Ice precense'},
          };
          
          //Map layers
          var ndviVis = {"min":0,"max":9000,"palette":["FFFFFF","CE7E45","DF923D","F1B555","FCD163","99B718","74A901","66A000","529400","3E8601","207401","056201","004C00","023B01","012E01","011D01","011301"]};
          
          Map.addLayer(ndvi1, ndviVis, 'NDVI');
          Map.addLayer(clippedLSTc, {
            min: 20, max: 40,
            palette: ['blue', 'limegreen', 'yellow', 'darkorange', 'red']},
            'Mean temperature, 2021');
          var precipitationVis = {
            min: 1.0,
            max: 17.0,
            palette: ['001137', '0aab1e', 'e7eb05', 'ff4a2d', 'e90000'],
          };
          Map.addLayer(pref1, precipitationVis, 'Precipitation');
          
          var iceVis = {
            palette: ['000088', '0000FF', '8888FF', 'FFFFFF'],
          };
          Map.addLayer(icef1, iceVis, 'Ice');
          
          //Graphs
          var ts1 = ui.Chart.image.series({
            imageCollection: modLSTc,
            region: KPK,
            reducer: ee.Reducer.mean(),
            scale: 1000,
            xProperty: 'system:time_start'})
            .setOptions({
               title: 'Temp of KPK Time Series',
               vAxis: {title: 'LST Celsius'}});
          print(ts1);
          
          var ts2 = ui.Chart.image.series({
            imageCollection: ndvi,
            region: KPK,
            reducer: ee.Reducer.mean(),
            xProperty: 'system:time_start'})
            .setOptions({
               title: 'Vegitation of KPK Time Series',
               vAxis: {title: 'NDVI range'}});
          print(ts2);
          
          var chart = ui.Chart.image.series({
            imageCollection: ice2, 
            region: KPK,
            reducer: ee.Reducer.mean(),
            scale: 500,
            xProperty: 'system:time_start'
          }).setOptions(title);
          
          print(chart);
          
          var chart1 = ui.Chart.image.series({
            imageCollection: pre2, 
            region: KPK,
            reducer: ee.Reducer.mean(),
            scale: 2500,
            xProperty: 'system:time_start'
          }).setOptions(title1);
          
          print(chart1);
          
          
          
          
