var Gilgit = 
    /* color: #ff5050 */
    /* locked: true */
    ee.Geometry.Polygon(
        [[[74.45280999798267, 32.78830119412828],
          [74.38689202923267, 32.912899142788845],
          [74.30998773235767, 32.931343211984355],
          [74.32097406048267, 33.0281114702089],
          [74.16167230267017, 33.07875725861825],
          [74.02983636517017, 33.202946044074054],
          [74.01335687298267, 33.25808461261755],
          [74.17815179485767, 33.40953626436707],
          [74.16716546673267, 33.546990847943846],
          [74.02434320110767, 33.59276055226724],
          [73.98589105267017, 33.757330395789104],
          [74.21111077923267, 33.86686849072248],
          [74.27153558392017, 33.9853763551684],
          [74.19463128704517, 34.04456842523015],
          [73.93645257610767, 34.02635987647449],
          [73.90349359173267, 34.11281566158858],
          [73.99687738079517, 34.194639713027215],
          [73.98039788860767, 34.26730561621765],
          [73.92546624798267, 34.33083682092852],
          [73.85405511517017, 34.33990878390777],
          [73.75517816204517, 34.358049766095625],
          [73.77715081829517, 34.41698084039991],
          [73.87053460735767, 34.45775496793016],
          [73.91447991985767, 34.53471845678813],
          [73.94743890423267, 34.58900283451527],
          [73.91997308392017, 34.64325176992386],
          [73.97490472454517, 34.697465237553324],
          [74.09575433392017, 34.65680846292692],
          [74.17815179485767, 34.715528507321196],
          [74.26604241985767, 34.76518215697066],
          [74.40337152142017, 34.778718881570136],
          [74.55718011517017, 34.76066942202162],
          [74.67802972454517, 34.692948803875055],
          [74.81535882610767, 34.679398024106916],
          [75.01860589642017, 34.65680846292692],
          [75.19988031048267, 34.64325176992386],
          [75.33720941204517, 34.56186507434461],
          [75.49651116985767, 34.53471845678813],
          [75.77116937298267, 34.53471845678813],
          [75.94695062298267, 34.638732379628394],
          [76.06230706829517, 34.692948803875055],
          [76.13371820110767, 34.665845026545995],
          [76.26006097454517, 34.706497365455526],
          [76.39189691204517, 34.74261601553295],
          [76.46880120892017, 34.79676439325058],
          [76.64458245892017, 34.74712973712996],
          [76.72148675579517, 34.83735235534448],
          [76.77092523235767, 34.931979799364925],
          [76.88078851360767, 34.963498058675924],
          [76.99614495892017, 34.94999171695166],
          [77.01262445110767, 34.99950408638723],
          [77.14446038860767, 35.53322004581443],
          [76.77092523235767, 35.67613948070865],
          [76.58965081829517, 35.77870504013339],
          [76.56767816204517, 35.92118509006866],
          [76.35893792767017, 35.84552443894992],
          [76.18864984173267, 35.83216505770132],
          [76.13371820110767, 35.94787158786506],
          [76.00188226360767, 36.02787700794716],
          [75.93047113079517, 36.14329707818882],
          [76.01286859173267, 36.267405973566795],
          [76.00737542767017, 36.40016125170065],
          [75.95244378704517, 36.501786996279115],
          [75.93596429485767, 36.58563822696028],
          [75.68327874798267, 36.748666271333015],
          [75.51299066204517, 36.73546064976838],
          [75.44157952923267, 36.73986277608208],
          [75.39214105267017, 36.92891523373014],
          [75.25481195110767, 36.972813924433225],
          [75.09551019329517, 37.0210732558753],
          [74.91972894329517, 36.95525748419211],
          [74.83733148235767, 37.05176779025285],
          [74.73845452923267, 37.025458948979775],
          [74.69450921673267, 37.078067514338514],
          [74.59563226360767, 37.04738361644765],
          [74.53520745892017, 36.95086774157684],
          [74.37041253704517, 36.959646973796524],
          [74.29900140423267, 36.90695640229375],
          [74.14519281048267, 36.85422941501524],
          [74.00786370892017, 36.827852271553574],
          [73.79912347454517, 36.89817109942863],
          [73.92546624798267, 36.72665563982215],
          [73.76616449017017, 36.69583015437276],
          [73.49150628704517, 36.68261544671246],
          [73.25530023235767, 36.669398468308636],
          [73.12895745892017, 36.647365125723304],
          [72.98064202923267, 36.44878147988643],
          [72.81584710735767, 36.29840243766862],
          [72.64006585735767, 36.21867237848543],
          [72.56865472454517, 36.17434274944902],
          [72.67302484173267, 35.89448958462719],
          [72.94218988079517, 35.91228758896833],
          [73.12346429485767, 35.89893946094813],
          [73.36516351360767, 35.685063466822314],
          [73.49150628704517, 35.546629584474736],
          [73.67278070110767, 35.42586306554369],
          [73.88152093548267, 35.27352878138949],
          [74.09575433392017, 35.14786147593713],
          [74.07927484173267, 34.96799967794382],
          [74.07378167767017, 34.882426632252965],
          [73.86504144329517, 34.778718881570725],
          [73.73869866985767, 34.75164321208731],
          [73.71672601360767, 34.652289811588425],
          [73.66728753704517, 34.56638864955647],
          [73.55742425579517, 34.548292872540245],
          [73.46953363079517, 34.5256676165158],
          [73.45854730267017, 34.44416580281063],
          [73.43108148235767, 34.376186822449206],
          [73.48051995892017, 34.22189677456643],
          [73.49699945110767, 34.05822227165974],
          [73.51347894329517, 33.99448551345498],
          [73.57939691204517, 33.775596483187044],
          [73.60136956829517, 33.62478490418661],
          [73.65080804485767, 33.455378687545185],
          [73.62334222454517, 33.39119251631979],
          [73.63982171673267, 33.27186382181106],
          [73.71123284954517, 33.17996138306898],
          [73.69475335735767, 33.092564689410715],
          [73.86504144329517, 33.0787572586194],
          [74.02434320110767, 33.00508102934153],
          [74.10124749798267, 33.023505863296734],
          [74.10674066204517, 33.10636995206245],
          [74.01885003704517, 33.14317338250391],
          [74.02434320110767, 33.19375290349113]]]);

MMap.centerObject(Gilgit, 6);

//Time
var start = ee.Date('2011-01-01');
var dateRange = ee.DateRange(start, start.advance(11, 'year'));

//TEMP
var modis = ee.ImageCollection('MODIS/006/MOD11A1');
var mod11a2 = modis.filterDate(dateRange);
var modLSTday = mod11a2.select('LST_Day_1km');
var modLSTc = modLSTday.map(function(img) {
  return img
    .multiply(0.02)
    .subtract(273.15)
    .copyProperties(img, ['system:time_start']);
});
var clippedLSTc = modLSTc.mean().clip(Gilgit);
//VEG
var Veg = ee.ImageCollection('MODIS/006/MOD13A2').filterDate(dateRange);
var ndvi = Veg.select('NDVI');
var ndvi1= ndvi.mean().clip(Gilgit);
//Precipation
var dataset =  ee.ImageCollection('UCSB-CHG/CHIRPS/DAILY');
var pre1 = dataset.filterDate(dateRange);
var pre2 = pre1.select('precipitation');

var pref1 = pre2.mean().clip(Gilgit);
var title1 = {
  title: ' Precipitation of Gilgit',
  hAxis: {title: 'Time'},
  vAxis: {title: 'Precipitation (mm)'},
};



//Ice
var dataset = ee.ImageCollection('MODIS/MOD09GA_006_NDSI');

var ice1 = dataset.filterDate(dateRange);

var ice2 = ice1.select('NDSI');

var icef1 = ice2.mean().clip(Gilgit);


var title = {
  title: ' NDSI of Gilgit',
  hAxis: {title: 'Time'},
  vAxis: {title: 'Ice precense'},
};

//Map layers
var ndviVis = {"min":0,"max":9000,"palette":["FFFFFF","CE7E45","DF923D","F1B555","FCD163","99B718","74A901","66A000","529400","3E8601","207401","056201","004C00","023B01","012E01","011D01","011301"]};

Map.addLayer(ndvi1, ndviVis, 'NDVI');
Map.addLayer(clippedLSTc, {
  min: 20, max: 40,
  palette: ['blue', 'limegreen', 'yellow', 'darkorange', 'red']},
  'Mean temperature, 2021');
var precipitationVis = {
  min: 1.0,
  max: 17.0,
  palette: ['001137', '0aab1e', 'e7eb05', 'ff4a2d', 'e90000'],
};
Map.addLayer(pref1, precipitationVis, 'Precipitation');

var iceVis = {
  palette: ['000088', '0000FF', '8888FF', 'FFFFFF'],
};
Map.addLayer(icef1, iceVis, 'Ice');

//Graphs
var ts1 = ui.Chart.image.series({
  imageCollection: modLSTc,
  region: Gilgit,
  reducer: ee.Reducer.mean(),
  scale: 1000,
  xProperty: 'system:time_start'})
  .setOptions({
     title: 'Temp of Gilgit Time Series',
     vAxis: {title: 'LST Celsius'}});
print(ts1);

var ts2 = ui.Chart.image.series({
  imageCollection: ndvi,
  region: Gilgit,
  reducer: ee.Reducer.mean(),
  xProperty: 'system:time_start'})
  .setOptions({
     title: 'Vegitation of Gilgit Time Series',
     vAxis: {title: 'NDVI range'}});
print(ts2);

var chart = ui.Chart.image.series({
  imageCollection: ice2, 
  region: Gilgit,
  reducer: ee.Reducer.mean(),
  scale: 500,
  xProperty: 'system:time_start'
}).setOptions(title);

print(chart);

var chart1 = ui.Chart.image.series({
  imageCollection: pre2, 
  region: Gilgit,
  reducer: ee.Reducer.mean(),
  scale: 2500,
  xProperty: 'system:time_start'
}).setOptions(title1);

print(chart1);





